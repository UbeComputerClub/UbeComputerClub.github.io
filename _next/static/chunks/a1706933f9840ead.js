(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32405,e=>{"use strict";var t=e.i(12926),r=e.i(42276),s=e.i(30200),a=e.i(38131);function n(e){let n,c,o,m,u,x,f,h,g,p,b,y=(0,r.c)(25),{url:w,title:j,onOpenNewTab:v}=e,[N,_]=(0,a.useState)("iframe"),[S,P]=(0,a.useState)(!1);y[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{_(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?"canvas":"iframe"),P(!0)},c=[],y[0]=n,y[1]=c):(n=y[0],c=y[1]),(0,a.useEffect)(n,c),y[2]===Symbol.for("react.memo_cache_sentinel")?(o=()=>_(i),y[2]=o):o=y[2];let k=o;return y[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)(s.default,{name:"picture_as_pdf",className:"text-red-600 text-xl shrink-0"}),y[3]=m):m=y[3],y[4]!==j?(u=(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[m,(0,t.jsx)("span",{className:"text-sm font-medium text-gray-800 truncate hidden sm:block max-w-[200px]",children:j})]}),y[4]=j,y[5]=u):u=y[5],y[6]!==S||y[7]!==N?(x=S&&(0,t.jsxs)("button",{type:"button",onClick:k,className:"inline-flex items-center gap-1.5 rounded-lg border border-gray-200 bg-white px-3 py-1.5 text-xs font-medium text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-colors",title:"iframe"===N?"モバイル表示に切り替え":"PC表示に切り替え",children:[(0,t.jsx)(s.default,{name:"swap_horiz",className:"text-base"}),"iframe"===N?"モバイル":"PC"]}),y[6]=S,y[7]=N,y[8]=x):x=y[8],y[9]!==v?(f=v&&(0,t.jsxs)("button",{type:"button",onClick:v,className:"inline-flex items-center gap-1.5 rounded-lg border border-gray-200 bg-white px-3 py-1.5 text-xs font-medium text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-colors",title:"新しいタブで開く",children:[(0,t.jsx)(s.default,{name:"open_in_new",className:"text-base"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"新しいタブ"})]}),y[9]=v,y[10]=f):f=y[10],y[11]!==x||y[12]!==f?(h=(0,t.jsxs)("div",{className:"flex items-center gap-1.5 shrink-0",children:[x,f]}),y[11]=x,y[12]=f,y[13]=h):h=y[13],y[14]!==u||y[15]!==h?(g=(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 px-3 py-2 bg-white border-b border-gray-200",children:[u,h]}),y[14]=u,y[15]=h,y[16]=g):g=y[16],y[17]!==N||y[18]!==v||y[19]!==j||y[20]!==w?(p="iframe"===N?(0,t.jsx)(l,{url:w,title:j,onSwitchToCanvas:()=>_("canvas")}):(0,t.jsx)(d,{url:w,title:j,onOpenNewTab:v}),y[17]=N,y[18]=v,y[19]=j,y[20]=w,y[21]=p):p=y[21],y[22]!==p||y[23]!==g?(b=(0,t.jsxs)("div",{className:"flex flex-col gap-0 rounded-xl border border-gray-200 overflow-hidden bg-gray-50",children:[g,p]}),y[22]=p,y[23]=g,y[24]=b):b=y[24],b}function i(e){return"iframe"===e?"canvas":"iframe"}function l(e){let n,i,l,o,d,m,u=(0,r.c)(16),{url:x,title:f,onSwitchToCanvas:h}=e,[g,p]=(0,a.useState)(!0),[b,y]=(0,a.useState)(!1);return u[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],u[0]=n):n=u[0],(0,a.useEffect)(c,n),u[1]===Symbol.for("react.memo_cache_sentinel")?(i={height:"82vh"},u[1]=i):i=u[1],u[2]!==b||u[3]!==f||u[4]!==x?(l=!b&&(0,t.jsx)("iframe",{src:`${x}#view=Fit`,title:f,className:"h-full w-full border-0",onLoad:()=>p(!1),onError:()=>{p(!1),y(!0)}}),u[2]=b,u[3]=f,u[4]=x,u[5]=l):l=u[5],u[6]!==b||u[7]!==g?(o=g&&!b&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-3 bg-gray-50 z-10",children:[(0,t.jsx)(s.default,{name:"hourglass_top",className:"text-2xl text-primary animate-pulse"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"PDF を読み込み中..."})]}),u[6]=b,u[7]=g,u[8]=o):o=u[8],u[9]!==b||u[10]!==h?(d=b&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4 bg-gray-50 p-8 text-center z-10",children:[(0,t.jsx)(s.default,{name:"error",className:"text-4xl text-red-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-gray-900",children:"ブラウザ内蔵ビューワーで開けませんでした"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"モバイル表示に切り替えると表示できる場合があります"})]}),(0,t.jsxs)("button",{type:"button",onClick:h,className:"inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(s.default,{name:"swap_horiz"}),"モバイル表示に切り替え"]})]}),u[9]=b,u[10]=h,u[11]=d):d=u[11],u[12]!==l||u[13]!==o||u[14]!==d?(m=(0,t.jsxs)("div",{className:"relative w-full bg-gray-100",style:i,children:[l,o,d]}),u[12]=l,u[13]=o,u[14]=d,u[15]=m):m=u[15],m}function c(){return o}function o(){if(window.visualViewport){let e=document.querySelector('meta[name="viewport"]');if(e){let t=e.getAttribute("content");e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0"),setTimeout(()=>{t&&e.setAttribute("content",t)},100)}}}function d({url:r,title:n,onOpenNewTab:i}){let l=(0,a.useRef)(null),c=(0,a.useRef)(null),o=(0,a.useRef)(null),d=(0,a.useRef)(null),[m,u]=(0,a.useState)(0),[x,f]=(0,a.useState)(1),[h,g]=(0,a.useState)(!0),[p,b]=(0,a.useState)(null);(0,a.useEffect)(()=>()=>{if(window.visualViewport){let e=document.querySelector('meta[name="viewport"]');if(e){let t=e.getAttribute("content");e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0"),setTimeout(()=>{t&&e.setAttribute("content",t)},100)}}},[]),(0,a.useEffect)(()=>{let t=!1;return async function(){g(!0),b(null);try{let s=await e.A(3077);s.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${s.version}/build/pdf.worker.min.mjs`;let a=s.getDocument({url:r,withCredentials:!1}),n=await a.promise;if(t)return void n.destroy();o.current=n,u(n.numPages),f(1),g(!1)}catch(e){t||(console.error("PDF.js load error:",e),b("PDF の読み込みに失敗しました。"),g(!1))}}(),()=>{t=!0,d.current?.cancel(),o.current?.destroy(),o.current=null}},[r]);let y=(0,a.useCallback)(async e=>{let t=o.current,r=l.current,s=c.current;if(!t||!r||!s)return;d.current?.cancel();let a=null;try{a=await t.getPage(e);let n=window.devicePixelRatio||1,i=a.getViewport({scale:1}),l=s.clientWidth/i.width,c=a.getViewport({scale:l});r.width=c.width*n,r.height=c.height*n,r.style.width=`${c.width}px`,r.style.height=`${c.height}px`;let o=r.getContext("2d");if(!o)return;o.setTransform(n,0,0,n,0,0);let m=a.render({canvasContext:o,viewport:a.getViewport({scale:l}),canvas:r});d.current=m,await m.promise}catch(e){e instanceof Error&&"Rendering cancelled"!==e.message&&console.error("PDF render error:",e)}finally{a?.cleanup()}},[]);return(0,a.useEffect)(()=>{!h&&o.current&&m>0&&y(x)},[x,h,m,y]),(0,a.useEffect)(()=>{let e=c.current;if(!e)return;let t=new ResizeObserver(()=>{!h&&o.current&&y(x)});return t.observe(e),()=>t.disconnect()},[x,h,y]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{ref:c,className:"relative w-full overflow-auto bg-gray-100",style:{minHeight:"70vh"},children:[h&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-3 bg-gray-50 z-10",children:[(0,t.jsx)(s.default,{name:"hourglass_top",className:"text-2xl text-primary animate-pulse"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"PDF を読み込み中..."})]}),p&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-3 bg-gray-50 p-8 text-center z-10",children:[(0,t.jsx)(s.default,{name:"error",className:"text-4xl text-red-500"}),(0,t.jsx)("p",{className:"font-bold text-gray-900",children:"読み込みに失敗しました"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:p}),i&&(0,t.jsxs)("button",{type:"button",onClick:i,className:"mt-2 inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(s.default,{name:"open_in_new"}),"新しいタブで開く"]})]}),(0,t.jsx)("div",{className:"flex justify-center p-2",children:(0,t.jsx)("canvas",{ref:l,className:"shadow-md rounded",style:{display:h||p?"none":"block",maxWidth:"100%"}})})]}),!h&&!p&&m>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-white border-t border-gray-200",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>f(e=>Math.max(1,e-1)),disabled:x<=1,className:"inline-flex items-center gap-1 rounded-lg px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:[(0,t.jsx)(s.default,{name:"arrow_back",className:"text-base"}),"前のページ"]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500 tabular-nums",children:[x," / ",m]}),(0,t.jsxs)("button",{type:"button",onClick:()=>f(e=>Math.min(m,e+1)),disabled:x>=m,className:"inline-flex items-center gap-1 rounded-lg px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:["次のページ",(0,t.jsx)(s.default,{name:"arrow_forward",className:"text-base"})]})]}),!h&&!p&&1===m&&(0,t.jsx)("div",{className:"flex justify-center px-4 py-2 bg-white border-t border-gray-200",children:(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"1 / 1 ページ"})})]})}e.s(["PdfViewerShell",()=>n])},17701,e=>{"use strict";var t=e.i(12926),r=e.i(42276),s=e.i(32405);function a(e){let a,n,i=(0,r.c)(6),{src:l,title:c}=e,o=l.startsWith("/")?l:`/${l}`;i[0]!==o?(a=()=>{window.open(o,"_blank","noopener,noreferrer")},i[0]=o,i[1]=a):a=i[1];let d=a;return i[2]!==d||i[3]!==o||i[4]!==c?(n=(0,t.jsx)(s.PdfViewerShell,{url:o,title:c,onOpenNewTab:d}),i[2]=d,i[3]=o,i[4]=c,i[5]=n):n=i[5],n}e.s(["PdfViewer",()=>a])},3077,e=>{e.v(t=>Promise.all(["static/chunks/87ee968620c6e0e9.js"].map(t=>e.l(t))).then(()=>t(10054)))}]);